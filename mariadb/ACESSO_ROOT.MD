### ğŸ›¡ï¸ A Fortaleza Digital: Por que Limitar o Acesso `root` ao seu IP?

Pense no seu usuÃ¡rio `root` como a **chave mestra** do seu castelo de dados. Permitir que ele se conecte de qualquer lugar (`'root'@'%'`) Ã© como deixar a chave mestra pendurada no portÃ£o principal, visÃ­vel para qualquer um que passar na rua.

Limitar o acesso a um Ãºnico IP especÃ­fico, como o da sua VPN WireGuard, transforma sua seguranÃ§a da Ã¡gua para o vinho. Veja por quÃª:

ğŸ’¥ **ReduÃ§Ã£o DrÃ¡stica da SuperfÃ­cie de Ataque**
Com acesso liberado para o mundo (`%`), qualquer pessoa na internet pode tentar adivinhar sua senha. Ao restringir a um Ãºnico IP, o atacante primeiro precisaria invadir a sua mÃ¡quina ou a sua rede VPN para ter a *chance* de tentar fazer login. A porta de entrada para o mundo foi fechada.

ğŸ¤– **ProteÃ§Ã£o Contra RobÃ´s e Ataques de ForÃ§a Bruta**
Existem milhares de robÃ´s (bots) varrendo a internet 24/7 em busca de bancos de dados com a porta 3306 aberta. Se encontram, eles comeÃ§am a testar milhÃµes de senhas comuns (`root`, `admin`, `123456`, etc.). Ao limitar o IP, seu banco de dados se torna invisÃ­vel para esses robÃ´s. Eles podem bater na porta, mas ninguÃ©m vai atender.

ğŸ” **Auditoria e Responsabilidade Claras**
Se alguma alteraÃ§Ã£o crÃ­tica for feita pelo usuÃ¡rio `root`, e esse usuÃ¡rio sÃ³ pode se conectar a partir de um Ãºnico IP, vocÃª sabe exatamente de onde veio a aÃ§Ã£o. Isso simplifica a investigaÃ§Ã£o de problemas e a responsabilizaÃ§Ã£o por mudanÃ§as.

ğŸšª **PrevenÃ§Ã£o de Acessos Indevidos**
A ameaÃ§a nem sempre Ã© externa. Limitar o `root` impede que outras aplicaÃ§Ãµes ou servidores na sua prÃ³pria infraestrutura, que nÃ£o deveriam ter esse nÃ­vel de acesso, se conectem acidentalmente (ou maliciosamente) com privilÃ©gios mÃ¡ximos.

-----

### ğŸ› ï¸ Passo a Passo: Trancando o `root` com seu IP do WireGuard

Vamos assumir que o IP fixo que sua VPN WireGuard fornece a vocÃª Ã© `10.10.10.2`. O processo Ã© simples e rÃ¡pido.

#### 1\. ğŸ–¥ï¸ Conecte-se ao seu Banco de Dados

Primeiro, acesse seu servidor (geralmente via SSH) e faÃ§a login no MariaDB/MySQL com privilÃ©gios de `root`.

```bash
# Conecte-se ao banco de dados
mariadb -u root -p
```

#### 2\. ğŸ•µï¸â€â™€ï¸ Verifique a ConfiguraÃ§Ã£o Atual

Antes de mudar, vamos ver como o `root` estÃ¡ configurado. Ã‰ muito provÃ¡vel que vocÃª tenha uma entrada com o Host `%` ou `localhost`.

```sql
SELECT User, Host FROM mysql.user WHERE User = 'root';
```

A saÃ­da pode ser algo como:

```
+------+-----------+
| User | Host      |
+------+-----------+
| root | %         |
| root | localhost |
+------+-----------+
```

Nosso alvo Ã© mudar a linha que contÃ©m `%`.

#### 3\. ğŸ”’ Execute o Comando de AlteraÃ§Ã£o

Agora, vamos usar o comando `RENAME USER` para alterar o host de `%` para o IP especÃ­fico da sua VPN.

```sql
RENAME USER 'root'@'%' TO 'root'@'10.10.10.2';
```

  * **`RENAME USER 'root'@'%'`**: Identifica o usuÃ¡rio que queremos alterar (o `root` que pode se conectar de qualquer lugar).
  * **`TO 'root'@'10.10.10.2'`**: Define a nova configuraÃ§Ã£o, permitindo acesso apenas do seu IP.

> âœ¨ **Dica:** Se vocÃª quisesse liberar para *qualquer dispositivo* na sua rede VPN, vocÃª usaria `... TO 'root'@'10.10.10.%';`. A versÃ£o com o IP especÃ­fico Ã© mais segura\!

#### 4\. âœ… Confirme a MudanÃ§a

Execute o comando de verificaÃ§Ã£o novamente para garantir que a alteraÃ§Ã£o foi aplicada com sucesso.

```sql
SELECT User, Host FROM mysql.user WHERE User = 'root';
```

A nova saÃ­da deve ser:

```
+------+--------------+
| User | Host         |
+------+--------------+
| root | 10.10.10.2   |
| root | localhost    |
+------+--------------+
```

Perfeito\! O acesso externo do `root` agora estÃ¡ restrito ao seu IP.

#### 5\. ğŸŒ Teste a ConexÃ£o

A melhor forma de ter certeza Ã© testar\!

  * **Desconecte** do banco de dados (`exit;`).
  * **Com a VPN ativa**, tente se conectar remotamente. O acesso deve funcionar\!
  * **(Opcional) Desative a VPN** e tente se conectar remotamente de novo. O acesso deve ser **negado**.

Pronto\! Com um Ãºnico comando, vocÃª aumentou drasticamente a seguranÃ§a do seu banco de dados. ğŸ‘

---

by: richwrd <3